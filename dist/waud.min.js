var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,l,p){d!=Array.prototype&&d!=Object.prototype&&(d[l]=p.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var l=0;return $jscomp.iteratorPrototype(function(){return l<d.length?{done:!1,value:d[l++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,l){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var p=0,m={next:function(){if(p<d.length){var e=p++;return{value:l(e,d[e]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(d,l,p,m){if(l){p=$jscomp.global;d=d.split(".");for(m=0;m<d.length-1;m++){var e=d[m];e in p||(p[e]={});p=p[e]}d=d[d.length-1];m=p[d];l=l(m);l!=m&&null!=l&&$jscomp.defineProperty(p,d,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
(function(d,l,p){function m(a,b){function f(){}f.prototype=a;a=new f;for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function e(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=K++);var f;null==a.hx__closures__?a.hx__closures__={}:f=a.hx__closures__[b.__id__];null==f&&(f=function(){return f.method.apply(f.scope,arguments)},f.scope=a,f.method=b,a.hx__closures__[b.__id__]=f);return f}var D=function(){this.bufferList=new t;this.types=new t;this.types.set("mp3",
"audio/mpeg");this.types.set("ogg","audio/ogg");this.types.set("wav","audio/wav");this.types.set("aac","audio/aac");this.types.set("m4a","audio/x-m4a")};D.__name__=!0;D.prototype={checkWebAudioAPISupport:function(){return null!=g.field(window,"AudioContext")||null!=g.field(window,"webkitAudioContext")},unlockAudio:function(){if(null!=this.audioContext){var a=this.audioContext.createBuffer(1,1,c.preferredSampleRate),b=this.audioContext.createBufferSource();b.buffer=a;b.connect(this.audioContext.destination);
null!=g.field(b,"start")?b.start(0):b.noteOn(0);null!=b.onended?b.onended=e(this,this._unlockCallback):w.delay(e(this,this._unlockCallback),1);"suspended"==this.audioContext.state&&this.audioContext.resume()}else a=window.document.createElement("audio"),b=window.document.createElement("source"),b.src="data:audio/wave;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAAAAAAABkYXRhAAAAAA==",a.appendChild(b),window.document.appendChild(a),a.play(),null!=c.__touchUnlockCallback&&c.__touchUnlockCallback(),
c.dom.ontouchend=null},_unlockCallback:function(){null!=c.__touchUnlockCallback&&c.__touchUnlockCallback();c.dom.ontouchend=null},createAudioContext:function(){if(null==this.audioContext)try{null!=g.field(window,"AudioContext")?this.audioContext=new AudioContext:null!=g.field(window,"webkitAudioContext")&&(this.audioContext=new webkitAudioContext),this.masterGainNode=this.createGain()}catch(a){a instanceof u&&(a=a.val),this.audioContext=null}return this.audioContext},createGain:function(){return null!=
this.audioContext.createGain?this.audioContext.createGain():g.callMethod(this.audioContext,g.field(this.audioContext,"createGainNode"),[])},destroy:function(){null!=this.audioContext&&null!=this.audioContext.close&&""!=this.audioContext.close&&this.audioContext.close();this.types=this.bufferList=this.audioContext=null},__class__:D};var v=function(a,b){this._b64=new n("(^data:audio).*(;base64,)","i");null!=a&&""!=a&&null!=c.audioManager&&(this.isSpriteSound=!1,this.url=a,this._muted=this._isPlaying=
this._isLoaded=!1,this._duration=0,this._options=q.setDefaultOptions(b),this.rate=this._options.playbackRate)};v.__name__=!0;v.prototype={isReady:function(){return this._isLoaded},__class__:v};var n=function(a,b){b=b.split("u").join("");this.r=new RegExp(a,b)};n.__name__=!0;n.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new u("EReg::matched");
},__class__:n};var B=function(){};B.__name__=!0;B.prototype={__class__:B};var z=function(a,b,f){v.call(this,a,b);this._snd=c.dom.createElement("audio");null==f?this._addSource(a):this._snd.appendChild(f);this._options.preload&&this.load();this._b64.match(a)};z.__name__=!0;z.__interfaces__=[B];z.__super__=v;z.prototype=m(v.prototype,{load:function(a){var b=this;this._isLoaded||(this._snd.autoplay=this._options.autoplay,this._snd.loop=this._options.loop,this._snd.volume=this._options.volume,this._snd.playbackRate=
this.rate,null!=a&&(this._options.onload=a),this._snd.preload=this._options.preload?"auto":"metadata",null!=this._options.onload&&(this._isLoaded=!0,this._snd.onloadeddata=function(){b._options.onload(b)}),this._snd.onplaying=function(){b._isLoaded=!0;b._isPlaying=!0},this._snd.onended=function(){b._isPlaying=!1;if(null!=b._options.onend)b._options.onend(b)},null!=this._options.onerror&&(this._snd.onerror=function(){b._options.onerror(b)}),this._snd.load());return this},getDuration:function(){return this._isLoaded?
this._duration=this._snd.duration:0},_addSource:function(a){this.source=c.dom.createElement("source");this.source.src=a;var b=this._getExt(a);null!=c.audioManager.types.get(b)&&(a=this._getExt(a),this.source.type=c.audioManager.types.get(a));this._snd.appendChild(this.source);return this.source},_getExt:function(a){return a.split(".").pop()},setVolume:function(a,b){0<=a&&1>=a&&(this._options.volume=a);this._isLoaded&&(this._snd.volume=this._options.volume)},getVolume:function(a){return this._options.volume},
mute:function(a,b){this._isLoaded&&(this._snd.muted=a,q.isiOS()&&(a&&this.isPlaying()?(this._muted=!0,this._snd.pause()):this._muted&&(this._muted=!1,this._snd.play())))},toggleMute:function(a){this.mute(!this._muted)},play:function(a,b){var f=this;this.spriteName=a;if(!this._isLoaded||null==this._snd)return-1;if(this._isPlaying)if(this._options.autostop)this.stop(this.spriteName);else{var k=h.__cast(this._snd.cloneNode(!0),HTMLAudioElement);4==k.readyState?(k.currentTime=0,k.play()):k.oncanplay=
function(){k.currentTime=0;k.play()};k.onended=function(){c.dom.removeChild(k)}}if(this._muted)return-1;this.isSpriteSound&&null!=b&&(this._snd.currentTime=null==this._pauseTime?b.start:this._pauseTime,null!=this._tmr&&this._tmr.stop(),this._tmr=w.delay(function(){null!=b.loop&&b.loop?f.play(f.spriteName,b):f.stop(f.spriteName)},Math.ceil(1E3*b.duration)));4==this._snd.readyState?this._snd.play():this._snd.oncanplay=function(){f._snd.play()};this._pauseTime=null;return 0},togglePlay:function(a){this._isPlaying?
this.pause():this.play()},isPlaying:function(a){return this._isPlaying},loop:function(a){this._isLoaded&&null!=this._snd&&(this._snd.loop=a)},autoStop:function(a){this._options.autostop=a},stop:function(a){this._isLoaded&&null!=this._snd&&(this._snd.currentTime=0,this._snd.pause(),this._isPlaying=!1,null!=this._tmr&&this._tmr.stop())},pause:function(a){this._isLoaded&&null!=this._snd&&(this._snd.pause(),this._pauseTime=this._snd.currentTime,this._isPlaying=!1,null!=this._tmr&&this._tmr.stop())},playbackRate:function(a,
b){return null==a?this.rate:this.rate=this._snd.playbackRate=a},setTime:function(a){!this._isLoaded||null==this._snd||a>this._snd.duration||(this._snd.currentTime=a)},getTime:function(){return null!=this._snd&&this._isLoaded&&this._isPlaying?this._snd.currentTime:0},onEnd:function(a,b){this._options.onend=a;return this},onLoad:function(a){this._options.onload=a;return this},onError:function(a){this._options.onerror=a;return this},destroy:function(){null!=this._snd&&(this._snd.pause(),this._snd.removeChild(this.source),
this._snd=this.source=null);this._isPlaying=!1},__class__:z});var x=function(){};x.__name__=!0;x.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};x.indexOf=function(a,b,f){var c=a.length;0>f&&(f+=c,0>f&&(f=0));for(;f<c;){if(a[f]===b)return f;f++}return-1};Math.__name__=!0;var g=function(){};g.__name__=!0;g.field=function(a,b){try{return a[b]}catch(f){return f instanceof u&&(f=f.val),null}};g.callMethod=function(a,b,f){return b.apply(a,f)};g.fields=function(a){var b=[];if(null!=a){var f=Object.prototype.hasOwnProperty,
c;for(c in a)"__id__"!=c&&"hx__closures__"!=c&&f.call(a,c)&&b.push(c)}return b};var y=function(){};y.__name__=!0;y.string=function(a){return h.__string_rec(a,"")};y.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=x.cca(a,1)&&88!=x.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var c=l.Waud=function(){};c.__name__=!0;c.init=function(a){null==c.__audioElement&&(null==a&&(a=window.document),c.dom=a,c.__audioElement=c.dom.createElement("audio"),null==c.audioManager&&(c.audioManager=new D),c.isWebAudioSupported=
c.audioManager.checkWebAudioAPISupport(),c.isHTML5AudioSupported=null!=g.field(window,"Audio"),c.isWebAudioSupported&&(c.audioContext=c.audioManager.createAudioContext()),c.sounds=new t,c._volume=1,c._sayHello())};c._sayHello=function(){var a=c.isWebAudioSupported?"Web Audio":"HTML5 Audio";1<window.navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(window.console,["\n %c %c %c WAUD%c.%cJS%c v"+c.version+" - "+a+" %c  %c http://www.waudjs.com %c %c %c \ud83d\udce2 \n\n","background: #32BEA6; padding:5px 0;",
"background: #32BEA6; padding:5px 0;","color: #E70000; background: #29162B; padding:5px 0;","color: #F3B607; background: #29162B; padding:5px 0;","color: #32BEA6; background: #29162B; padding:5px 0;","color: #999999; background: #29162B; padding:5px 0;","background: #32BEA6; padding:5px 0;","background: #B8FCEF; padding:5px 0;","background: #32BEA6; padding:5px 0;","color: #E70000; background: #32BEA6; padding:5px 0;","color: #FF2424; background: #FFFFFF; padding:5px 0;"]):window.console.log("WAUD.JS v"+
c.version+" - "+a+" - http://www.waudjs.com")};c.autoMute=function(){c._focusManager=new r;c._focusManager.focus=function(){c.mute(!1)};c._focusManager.blur=function(){c.mute(!0)}};c.enableTouchUnlock=function(a){c.__touchUnlockCallback=a;c.dom.ontouchend=(F=c.audioManager,e(F,F.unlockAudio))};c.setVolume=function(a){if(((a|0)===a||"number"==typeof a)&&0<=a&&1>=a){if(c._volume=a,null!=c.sounds)for(var b=c.sounds.iterator();b.hasNext();)b.next().setVolume(a)}else window.console.warn("Volume should be a number between 0 and 1. Received: "+
a)};c.getVolume=function(){return c._volume};c.mute=function(a){null==a&&(a=!0);c.isMuted=a;if(null!=c.sounds)for(var b=c.sounds.iterator();b.hasNext();)b.next().mute(a)};c.playbackRate=function(a){if(null==a)return c._playbackRate;if(null!=c.sounds)for(var b=c.sounds.iterator();b.hasNext();)b.next().playbackRate(a);return c._playbackRate=a};c.stop=function(){if(null!=c.sounds)for(var a=c.sounds.iterator();a.hasNext();)a.next().stop()};c.pause=function(){if(null!=c.sounds)for(var a=c.sounds.iterator();a.hasNext();)a.next().pause()};
c.playSequence=function(a,b,f,k){null==k&&(k=-1);if(null!=a&&0!=a.length){for(var d=0,e=a.length;d<e;){var g=d++;null==c.sounds.get(a[g])&&a.splice(g,1)}var h=null;h=function(){if(0<a.length){var d=a.shift(),e=c.sounds.get(d);e.play();if(0<k)w.delay(function(){null!=f&&f(d);h()},k);else e.onEnd(function(a){null!=f&&f(d);h()})}else null!=b&&b()};h()}};c.getFormatSupportString=function(){var a="OGG: "+c.__audioElement.canPlayType('audio/ogg; codecs="vorbis"');a+=", WAV: "+c.__audioElement.canPlayType('audio/wav; codecs="1"');
a+=", MP3: "+c.__audioElement.canPlayType("audio/mpeg;");a+=", AAC: "+c.__audioElement.canPlayType("audio/aac;");return a+=", M4A: "+c.__audioElement.canPlayType("audio/x-m4a;")};c.isSupported=function(){if(null==c.isWebAudioSupported||null==c.isHTML5AudioSupported)c.isWebAudioSupported=c.audioManager.checkWebAudioAPISupport(),c.isHTML5AudioSupported=null!=g.field(window,"Audio");return c.isWebAudioSupported||c.isHTML5AudioSupported};c.isOGGSupported=function(){var a=c.__audioElement.canPlayType('audio/ogg; codecs="vorbis"');
return c.isHTML5AudioSupported&&null!=a&&("probably"==a||"maybe"==a)};c.isWAVSupported=function(){var a=c.__audioElement.canPlayType('audio/wav; codecs="1"');return c.isHTML5AudioSupported&&null!=a&&("probably"==a||"maybe"==a)};c.isMP3Supported=function(){var a=c.__audioElement.canPlayType("audio/mpeg;");return c.isHTML5AudioSupported&&null!=a&&("probably"==a||"maybe"==a)};c.isAACSupported=function(){var a=c.__audioElement.canPlayType("audio/aac;");return c.isHTML5AudioSupported&&null!=a&&("probably"==
a||"maybe"==a)};c.isM4ASupported=function(){var a=c.__audioElement.canPlayType("audio/x-m4a;");return c.isHTML5AudioSupported&&null!=a&&("probably"==a||"maybe"==a)};c.getSampleRate=function(){return null!=c.audioContext?c.audioContext.sampleRate:0};c.destroy=function(){if(null!=c.sounds)for(var a=c.sounds.iterator();a.hasNext();)a.next().destroy();c.sounds=null;null!=c.audioManager&&c.audioManager.destroy();c.audioManager=null;c.audioContext=null;c.__audioElement=null;null!=c._focusManager&&(c._focusManager.clearEvents(),
c._focusManager.blur=null,c._focusManager.focus=null,c._focusManager=null)};d=l.WaudBase64Pack=function(a,b,f,k,d,e){null==e&&(e=!1);null!=c.audioManager&&(this._sequentialLoad=e,0<a.indexOf(".json")&&(this.progress=0,this._options=q.setDefaultOptions(d),this._loadCount=this._soundCount=this._totalSize=0,this._onLoaded=b,this._onProgress=f,this._onError=k,this._sounds=new t,this._loadBase64Json(a)))};d.__name__=!0;d.prototype={_loadBase64Json:function(a){var b=this,c=new n('"meta":.[0-9]*,[0-9]*.',
"i"),k=new XMLHttpRequest;k.open("GET",a,!0);null!=this._onProgress&&(k.onprogress=function(a){if(c.match(k.responseText)&&0==b._totalSize){var f=JSON.parse("{"+c.matched(0)+"}");b._totalSize=f.meta[1]}b.progress=a.lengthComputable?a.loaded/a.total:a.loaded/b._totalSize;1<b.progress&&(b.progress=1);b._onProgress(.8*b.progress)});null!=this._onError&&(k.onerror=function(a){b._onError()});k.onreadystatechange=function(){if(4==k.readyState)switch(k.status){case 200:var a=JSON.parse(k.responseText);b._soundsToLoad=
new t;b._soundIds=[];for(var c=0,f=g.fields(a);c<f.length;){var d=f[c];++c;if("meta"!=d)if(a instanceof Array&&null==a.__enum__){b._soundIds.push(g.field(a,d).name);var e=g.field(a,d).name;d="data:"+y.string(g.field(a,d).mime)+";base64,"+y.string(g.field(a,d).data);b._soundsToLoad.set(e,d)}else b._soundIds.push(d),e=g.field(a,d),b._soundsToLoad.set(d,e)}b._soundCount=b._soundIds.length;if(b._sequentialLoad)b._createSound(b._soundIds.shift());else for(;0<b._soundIds.length;)b._createSound(b._soundIds.shift());
break;case 404:b._onError()}};k.send(null)},_createSound:function(a){var b=this;new C(this._soundsToLoad.get(a),{onload:function(f){b._sounds.set(a,f);c.sounds.set(a,f);if(null!=b._options.onload)b._options.onload(f);b._checkProgress()},onerror:function(c){b._sounds.set(a,null);if(null!=b._options.onerror)b._options.onerror(c);b._checkProgress()&&null!=b._onError&&b._onError()},autoplay:this._options.autoplay,autostop:this._options.autostop,loop:this._options.loop,onend:this._options.onend,playbackRate:this._options.playbackRate,
preload:this._options.preload,volume:this._options.volume,webaudio:this._options.webaudio})},_checkProgress:function(){this._loadCount++;null!=this._onProgress&&this._onProgress(.8+this._loadCount/this._soundCount*.19999999999999996);if(this._loadCount==this._soundCount)return this._soundsToLoad=null,null!=this._onLoaded&&this._onLoaded(this._sounds),!0;this._sequentialLoad&&this._createSound(this._soundIds.shift());return!1},__class__:d};var r=l.WaudFocusManager=function(){var a=this;this._currentState=
this._visibilityChange=this._hidden="";null!=g.field(window.document,"hidden")?(this._hidden="hidden",this._visibilityChange="visibilitychange"):null!=g.field(window.document,"mozHidden")?(this._hidden="mozHidden",this._visibilityChange="mozvisibilitychange"):null!=g.field(window.document,"msHidden")?(this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):null!=g.field(window.document,"webkitHidden")&&(this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange");null!=
g.field(window,"addEventListener")?(window.addEventListener("focus",e(this,this._focus)),window.addEventListener("blur",e(this,this._blur)),window.addEventListener("pageshow",e(this,this._focus)),window.addEventListener("pagehide",e(this,this._blur)),document.addEventListener(this._visibilityChange,e(this,this._handleVisibilityChange))):null!=g.field(window,"attachEvent")?(window.attachEvent("onfocus",e(this,this._focus)),window.attachEvent("onblur",e(this,this._blur)),window.attachEvent("pageshow",
e(this,this._focus)),window.attachEvent("pagehide",e(this,this._blur)),document.attachEvent(this._visibilityChange,e(this,this._handleVisibilityChange))):window.onload=function(){window.onfocus=e(a,a._focus);window.onblur=e(a,a._blur);window.onpageshow=e(a,a._focus);window.onpagehide=e(a,a._blur)}};r.__name__=!0;r.prototype={_handleVisibilityChange:function(){null!=g.field(window.document,this._hidden)&&g.field(window.document,this._hidden)&&null!=this.blur?this.blur():null!=this.focus&&this.focus()},
_focus:function(){"focus"!=this._currentState&&null!=this.focus&&this.focus();this._currentState="focus"},_blur:function(){"blur"!=this._currentState&&null!=this.blur&&this.blur();this._currentState="blur"},clearEvents:function(){null!=g.field(window,"removeEventListener")?(window.removeEventListener("focus",e(this,this._focus)),window.removeEventListener("blur",e(this,this._blur)),window.removeEventListener("pageshow",e(this,this._focus)),window.removeEventListener("pagehide",e(this,this._blur)),
window.removeEventListener(this._visibilityChange,e(this,this._handleVisibilityChange))):null!=g.field(window,"removeEvent")?(window.removeEvent("onfocus",e(this,this._focus)),window.removeEvent("onblur",e(this,this._blur)),window.removeEvent("pageshow",e(this,this._focus)),window.removeEvent("pagehide",e(this,this._blur)),window.removeEvent(this._visibilityChange,e(this,this._handleVisibilityChange))):(window.onfocus=null,window.onblur=null,window.onpageshow=null,window.onpagehide=null)},__class__:r};
var C=l.WaudSound=function(a,b){null!=c.audioManager&&(this.rate=1,this._options=b,0<a.indexOf(".json")?(this.isSpriteSound=!0,this._spriteDuration=0,this._spriteSounds=new t,this._spriteSoundEndCallbacks=new t,this._loadSpriteJson(a)):(this.isSpriteSound=!1,this._init(a)),(new n("(^data:audio).*(;base64,)","i")).match(a)&&(a="snd"+(new Date).getTime()),c.sounds.set(a,this))};C.__name__=!0;C.__interfaces__=[B];C.prototype={_loadSpriteJson:function(a){var b=this,c=new XMLHttpRequest;c.open("GET",a,
!0);c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){b._spriteData=JSON.parse(c.responseText);var f=b._spriteData.src;-1<a.indexOf("/")&&(f=a.substring(0,a.lastIndexOf("/")+1)+f);b._init(f)}};c.send(null)},_init:function(a){var b=this;this.url=a;if(c.isWebAudioSupported&&c.useWebAudio&&(null==this._options||null==this._options.webaudio||this._options.webaudio))this.isSpriteSound?this._loadSpriteSound(this.url):this._snd=new A(this.url,this._options);else if(c.isHTML5AudioSupported)if(null!=
this._spriteData&&null!=this._spriteData.sprite){var f=0;var k=null!=this._options&&null!=this._options.onload?this._options.onload:null;null==this._options&&(this._options={});this._options.onload=function(a){f++;f==b._spriteData.sprite.length&&null!=k&&k(a)};this._options.onerror=function(a){f++;f==b._spriteData.sprite.length&&null!=k&&k(a)};a=0;for(var d=this._spriteData.sprite;a<d.length;){var e=d[a];++a;var g=new z(this.url,this._options);g.isSpriteSound=!0;this._spriteSounds.set(e.name,g)}}else this._snd=
new z(this.url,this._options)},getDuration:function(){return this.isSpriteSound?this._spriteDuration:null==this._snd?0:this._snd.getDuration()},setVolume:function(a,b){(a|0)===a||"number"==typeof a?this.isSpriteSound?null!=b&&null!=this._spriteSounds.get(b)&&this._spriteSounds.get(b).setVolume(a):null!=this._snd&&this._snd.setVolume(a):window.console.warn("Volume should be a number between 0 and 1. Received: "+a)},getVolume:function(a){return this.isSpriteSound?null!=a&&null!=this._spriteSounds.get(a)?
this._spriteSounds.get(a).getVolume():0:null==this._snd?0:this._snd.getVolume()},mute:function(a,b){if(this.isSpriteSound)if(null!=b&&null!=this._spriteSounds.get(b))this._spriteSounds.get(b).mute(a);else for(b=this._spriteSounds.iterator();b.hasNext();)b.next().mute(a);else null!=this._snd&&this._snd.mute(a)},toggleMute:function(a){if(this.isSpriteSound)if(null!=a&&null!=this._spriteSounds.get(a))this._spriteSounds.get(a).toggleMute();else for(a=this._spriteSounds.iterator();a.hasNext();)a.next().toggleMute();
else null!=this._snd&&this._snd.toggleMute()},load:function(a){if(null==this._snd||this.isSpriteSound)return null;this._snd.load(a);return this},isReady:function(){if(this.isSpriteSound){if(null==this._spriteData)return!1;for(var a=this._spriteSounds.iterator();a.hasNext();)if(!a.next().isReady())return!1;return!0}return null!=this._snd&&this._snd.isReady()},play:function(a,b){if(this.isSpriteSound)if(null!=a){for(var c=0,d=this._spriteData.sprite;c<d.length;){var e=d[c];++c;if(e.name==a){b=e;break}}if(null==
b)return null;if(null!=this._spriteSounds.get(a))return this._spriteSounds.get(a).play(a,b)}else return null;return null==this._snd?null:this._snd.play(a,b)},togglePlay:function(a){this.isSpriteSound?null!=a&&null!=this._spriteSounds.get(a)&&this._spriteSounds.get(a).togglePlay():null!=this._snd&&this._snd.togglePlay()},isPlaying:function(a){return this.isSpriteSound?null!=a&&null!=this._spriteSounds.get(a)?this._spriteSounds.get(a).isPlaying():!1:null==this._snd?!1:this._snd.isPlaying()},loop:function(a){null==
this._snd||this.isSpriteSound||this._snd.loop(a)},autoStop:function(a){null!=this._snd&&this._snd.autoStop(a)},stop:function(a){if(this.isSpriteSound)if(null!=a&&null!=this._spriteSounds.get(a))this._spriteSounds.get(a).stop();else for(a=this._spriteSounds.iterator();a.hasNext();)a.next().stop();else null!=this._snd&&this._snd.stop()},pause:function(a){if(this.isSpriteSound)if(null!=a&&null!=this._spriteSounds.get(a))this._spriteSounds.get(a).pause();else for(a=this._spriteSounds.iterator();a.hasNext();)a.next().pause();
else null!=this._snd&&this._snd.pause()},playbackRate:function(a,b){if(null!=a){if(this.isSpriteSound)if(null!=b&&null!=this._spriteSounds.get(b))this._spriteSounds.get(b).playbackRate(a);else for(b=this._spriteSounds.iterator();b.hasNext();)b.next().playbackRate(a);else null!=this._snd&&this._snd.playbackRate(a);return this.rate=a}return this.rate},setTime:function(a){null==this._snd||this.isSpriteSound||this._snd.setTime(a)},getTime:function(){return null==this._snd||this.isSpriteSound?0:this._snd.getTime()},
onEnd:function(a,b){return this.isSpriteSound?(null!=b&&this._spriteSoundEndCallbacks.set(b,a),this):null!=this._snd?(this._snd.onEnd(a),this):null},onLoad:function(a){if(null==this._snd||this.isSpriteSound)return null;this._snd.onLoad(a);return this},onError:function(a){if(null==this._snd||this.isSpriteSound)return null;this._snd.onError(a);return this},destroy:function(){if(this.isSpriteSound)for(var a=this._spriteSounds.iterator();a.hasNext();)a.next().destroy();else null!=this._snd&&(this._snd.destroy(),
this._snd=null)},_loadSpriteSound:function(a){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.onload=e(this,this._onSpriteSoundLoaded);b.onerror=e(this,this._onSpriteSoundError);b.send()},_onSpriteSoundLoaded:function(a){c.audioManager.audioContext.decodeAudioData(a.target.response,e(this,this._decodeSuccess),e(this,this._onSpriteSoundError))},_onSpriteSoundError:function(){if(null!=this._options&&null!=this._options.onerror)this._options.onerror(this)},_decodeSuccess:function(a){if(null==
a)this._onSpriteSoundError();else{c.audioManager.bufferList.set(this.url,a);this._spriteDuration=a.duration;if(null!=this._options&&null!=this._options.onload)this._options.onload(this);for(var b=0,f=this._spriteData.sprite;b<f.length;){var d=f[b];++b;var g=new A(this.url,this._options,!0,a.duration);g.isSpriteSound=!0;this._spriteSounds.set(d.name,g);g.onEnd(e(this,this._spriteOnEnd),d.name)}}},_spriteOnEnd:function(a){null!=this._spriteSoundEndCallbacks.get(a.spriteName)&&this._spriteSoundEndCallbacks.get(a.spriteName)(a)},
__class__:C};var q=l.WaudUtils=function(){};q.__name__=!0;q.isAndroid=function(a){null==a&&(a=window.navigator.userAgent);return(new n("Android","i")).match(a)};q.isiOS=function(a){null==a&&(a=window.navigator.userAgent);return(new n("(iPad|iPhone|iPod)","i")).match(a)};q.isWindowsPhone=function(a){null==a&&(a=window.navigator.userAgent);return(new n("(IEMobile|Windows Phone)","i")).match(a)};q.isFirefox=function(a){null==a&&(a=window.navigator.userAgent);return(new n("Firefox","i")).match(a)};q.isOpera=
function(a){null==a&&(a=window.navigator.userAgent);return(new n("Opera","i")).match(a)||null!=g.field(window,"opera")};q.isChrome=function(a){null==a&&(a=window.navigator.userAgent);return(new n("Chrome","i")).match(a)};q.isSafari=function(a){null==a&&(a=window.navigator.userAgent);return(new n("Safari","i")).match(a)};q.isMobile=function(a){null==a&&(a=window.navigator.userAgent);return(new n("(iPad|iPhone|iPod|Android|webOS|BlackBerry|Windows Phone|IEMobile)","i")).match(a)};q.getiOSVersion=function(a){null==
a&&(a=window.navigator.userAgent);var b=new n("[0-9_]+?[0-9_]+?[0-9_]+","i"),c=[];if(b.match(a)){a=b.matched(0).split("_");b=[];for(c=0;c<a.length;){var d=a[c];++c;b.push(y.parseInt(d))}c=b}return c};q.setDefaultOptions=function(a){null==a&&(a={});a.autoplay=null!=a.autoplay?a.autoplay:c.defaults.autoplay;a.autostop=null!=a.autostop?a.autostop:c.defaults.autostop;a.webaudio=null!=a.webaudio?a.webaudio:c.defaults.webaudio;a.preload=null!=a.preload?a.preload:c.defaults.preload;a.loop=null!=a.loop?a.loop:
c.defaults.loop;a.onload=null!=a.onload?a.onload:c.defaults.onload;a.onend=null!=a.onend?a.onend:c.defaults.onend;a.onerror=null!=a.onerror?a.onerror:c.defaults.onerror;if(null==a.volume||0>a.volume||1<a.volume)a.volume=c.defaults.volume;if(null==a.playbackRate||0>=a.playbackRate||4<=a.playbackRate)a.playbackRate=c.defaults.playbackRate;return a};var A=function(a,b,f,d){null==d&&(d=0);null==f&&(f=!1);v.call(this,a,b);this._pauseTime=this._playStartTime=0;this._srcNodes=[];this._gainNodes=[];this._currentSoundProps=
null;this._isLoaded=f;this._duration=d;this._manager=c.audioManager;this._b64.match(a)?this._decodeAudio(this._base64ToArrayBuffer(a)):this._options.preload&&!f&&this.load()};A.__name__=!0;A.__interfaces__=[B];A.__super__=v;A.prototype=m(v.prototype,{load:function(a){if(!this._isLoaded){var b=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType="arraybuffer";b.onload=e(this,this._onSoundLoaded);b.onerror=e(this,this._error);b.send();null!=a&&(this._options.onload=a)}return this},_base64ToArrayBuffer:function(a){a=
window.atob(a.split(",")[1]);for(var b=a.length,c=new Uint8Array(new ArrayBuffer(b)),d=0;d<b;){var e=d++;c[e]=x.cca(a,e)}return c.buffer},_onSoundLoaded:function(a){this._manager.audioContext.decodeAudioData(a.target.response,e(this,this._decodeSuccess),e(this,this._error))},_decodeAudio:function(a){this._manager.audioContext.decodeAudioData(a,e(this,this._decodeSuccess),e(this,this._error))},_error:function(){if(null!=this._options.onerror)this._options.onerror(this)},_decodeSuccess:function(a){if(null==
a)this._error();else{this._manager.bufferList.set(this.url,a);this._isLoaded=!0;this._duration=a.duration;if(null!=this._options.onload)this._options.onload(this);this._options.autoplay&&this.play()}},_makeSource:function(a){var b=this._manager.audioContext.createBufferSource();b.buffer=a;this._gainNode=this._manager.createGain();b.connect(this._gainNode);b.playbackRate.value=this.rate;this._gainNode.connect(this._manager.masterGainNode);this._manager.masterGainNode.connect(this._manager.audioContext.destination);
this._srcNodes.push(b);this._gainNodes.push(this._gainNode);if(this._muted)this._gainNode.gain.value=0;else try{this._gainNode.gain.value=this._options.volume,this._gainNode.gain.setTargetAtTime(this._options.volume,this._manager.audioContext.currentTime,.015)}catch(f){f instanceof u&&(f=f.val)}return b},getDuration:function(){return this._isLoaded?this._duration:0},play:function(a,b){var c=this;this.spriteName=a;this._isPlaying&&this._options.autostop&&this.stop(this.spriteName);if(!this._isLoaded)return-1;
var d=0,e=-1;this.isSpriteSound&&null!=b&&(this._currentSoundProps=b,d=b.start+this._pauseTime,e=b.duration);a=null!=this._manager.bufferList?this._manager.bufferList.get(this.url):null;null!=a&&(this.source=this._makeSource(a),0<=d&&-1<e?this._start(0,d,e):(this._start(0,this._pauseTime,this.source.buffer.duration),this.source.loop=this._options.loop),this._playStartTime=this._manager.audioContext.currentTime,this._isPlaying=!0,this.source.onended=function(){c._isPlaying&&(c._pauseTime=0);c._isPlaying=
!1;if(c.isSpriteSound&&null!=b&&null!=b.loop&&b.loop&&0<=d&&-1<e)c.destroy(),c.play(c.spriteName,b);else if(null!=c._options.onend)c._options.onend(c)});return x.indexOf(this._srcNodes,this.source,0)},_start:function(a,b,c){null!=g.field(this.source,"start")?this.source.start(a,b,c):null!=g.field(this.source,"noteGrainOn")?g.callMethod(this.source,g.field(this.source,"noteGrainOn"),[a,b,c]):null!=g.field(this.source,"noteOn")&&g.callMethod(this.source,g.field(this.source,"noteOn"),[a,b,c])},togglePlay:function(a){this._isPlaying?
this.pause():this.play()},isPlaying:function(a){return this._isPlaying},loop:function(a){this._options.loop=a;null!=this.source&&(this.source.loop=a)},setVolume:function(a,b){this._options.volume=a;null!=this._gainNode&&this._isLoaded&&!this._muted&&(this._gainNode.gain.value=this._options.volume)},getVolume:function(a){return this._options.volume},mute:function(a,b){this._muted=a;null!=this._gainNode&&this._isLoaded&&(this._gainNode.gain.value=a?0:this._options.volume)},toggleMute:function(a){this.mute(!this._muted)},
autoStop:function(a){this._options.autostop=a},stop:function(a){this._pauseTime=0;null!=this.source&&this._isLoaded&&this._isPlaying&&this.destroy()},pause:function(a){null!=this.source&&this._isLoaded&&this._isPlaying&&(this.destroy(),this._pauseTime+=this._manager.audioContext.currentTime-this._playStartTime,null)},playbackRate:function(a,b){if(null==a)return this.rate;b=0;for(var c=this._srcNodes;b<c.length;){var d=c[b];++b;d.playbackRate.value=a}return this.rate=a},setTime:function(a){!this._isLoaded||
a>this._duration||(this._isPlaying?(this.stop(),this._pauseTime=a,this.play()):this._pauseTime=a)},getTime:function(){return null!=this.source&&this._isLoaded&&this._isPlaying?this._manager.audioContext.currentTime-this._playStartTime+this._pauseTime:0},onEnd:function(a,b){this._options.onend=a;return this},onLoad:function(a){this._options.onload=a;return this},onError:function(a){this._options.onerror=a;return this},destroy:function(){for(var a=0,b=this._srcNodes;a<b.length;){var c=b[a];++a;null!=
g.field(c,"stop")?c.stop(0):null!=g.field(c,"noteOff")&&g.callMethod(c,g.field(c,"noteOff"),[0]);c.disconnect()}a=0;for(b=this._gainNodes;a<b.length;)c=b[a],++a,c.disconnect();this._srcNodes=[];this._gainNodes=[];this._isPlaying=!1},__class__:A});l=function(){};l.__name__=!0;var w=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};w.__name__=!0;w.delay=function(a,b){var c=new w(b);c.run=function(){c.stop();a()};return c};w.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),
this.id=null)},run:function(){},__class__:w};var E=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};E.__name__=!0;E.prototype={hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:E};var t=function(){this.h={}};t.__name__=!0;t.__interfaces__=[l];t.prototype={set:function(a,b){null!=H[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=H[a]?this.getReserved(a):this.h[a]},setReserved:function(a,
b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new E(this,this.arrayKeys())},__class__:t};var u=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,u)};u.__name__=!0;u.__super__=
Error;u.prototype=m(Error.prototype,{__class__:u});var h=function(){};h.__name__=!0;h.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=h.__nativeClassName(a);return null!=a?h.__resolveNativeClass(a):null};h.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];
c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;){var g=d++;c=2!=g?c+(","+h.__string_rec(a[g],b)):c+h.__string_rec(a[g],b)}return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)g=e++,d+=(0<g?",":"")+h.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(G){return G instanceof u&&(G=G.val),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==
c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+h.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};h.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var g=d++;g=c[g];if(g==b||h.__interfLoop(g,b))return!0}return h.__interfLoop(a.__super__,b)};h.__instanceof=function(a,b){if(null==
b)return!1;switch(b){case L:return(a|0)===a;case I:return"number"==typeof a;case J:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case M:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||h.__interfLoop(h.getClass(a),b))return!0}else{if("object"==typeof b&&h.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==N&&null!=a.__name__||b==O&&null!=a.__ename__?!0:a.__enum__==b}};h.__cast=function(a,
b){if(h.__instanceof(a,b))return a;throw new u("Cannot cast "+y.string(a)+" to "+y.string(b));};h.__nativeClassName=function(a){a=h.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};h.__isNativeObj=function(a){return null!=h.__nativeClassName(a)};h.__resolveNativeClass=function(a){return p[a]};var F,K=0;Array.prototype.indexOf&&(x.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});String.prototype.__class__=String;String.__name__=!0;Array.__name__=
!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var L={__name__:["Int"]},M={__name__:["Dynamic"]},I=Number;I.__name__=["Float"];var J=Boolean;J.__ename__=["Bool"];var N={__name__:["Class"]},O={},H={};c.PROBABLY="probably";c.MAYBE="maybe";c.version="1.0.1";c.useWebAudio=!0;c.defaults={autoplay:!1,autostop:!0,loop:!1,preload:!0,webaudio:!0,volume:1,playbackRate:1};c.preferredSampleRate=44100;c.isMuted=!1;c._playbackRate=1;d.JSON_PER=.8;r.FOCUS_STATE="focus";r.BLUR_STATE="blur";r.ON_FOCUS="onfocus";
r.ON_BLUR="onblur";r.PAGE_SHOW="pageshow";r.PAGE_HIDE="pagehide";r.WINDOW="window";r.DOCUMENT="document";h.__toStr={}.toString})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
